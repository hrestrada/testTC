<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    
    
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    
    
    <link href="css/main.css" type="text/css" rel="stylesheet" />
    <title>ThirdChannel Test Site</title>
    
    
 
    
  </head>


  <body>

    <div id="header">
      <img src="images/logocdw.jpeg" class="logo" alt="CDW Logo"/>
        <div id="nav">
            <ul>
                <li><a href="">Home</a></li>
                <li><a href="">Categories</a></li>
                <li><a href="">Products</a></li>
                <li><a href="">Contact</a></li>

            </ul>
        </div>
    </div>

    <div id="content">
        <div id="feature">
          <p> Main Feature </p>
            <div id="article_1">
              <p id="p_article_1">Product 1</p>
            </div>
            <div id="article_2">
              <p id="p_article_2">Product 2</p>
            </div>
            <div id="article_3">
              <p id="p_article_3">Brand 1</p>
            </div>
        </div>
    </div>

    

    
    
    <div id="footer">
        <p>ThirdChannel Test Site</p>
    </div>
    

    <script type='text/javascript' src='https://service.force.com/embeddedservice/5.0/esw.min.js'></script>
    <script type="text/javascript">   
            
        var varProductID   = '020806'; //Needs to be gather from the URL
        var varVisitorID   = setVisitorID();
        var varVisitorURL = window.location.href;
        console.log('varVisitorID Value: ' + varVisitorID);
        console.log('varVisitorURL Value: ' + varVisitorURL);
    
  //      function getTCiFrame(){
  //      var urlPath = window.location.href;//pathname;
  //      var loc = "https://thirdchannel2022--apps--c.sandbox.vf.force.com/apex/TestOmniFlowRouting" + '?urlpath=' + urlPath;
  //      document.getElementById('tcIframe').setAttribute('src', loc);
    
      
        window.onload = function makeRequest1() {       
            fetch('https://thirdchannel2022--apps.sandbox.my.site.com/services/apexrest/TcChat/')
              .then((response) => {
                return response.json();
              })
              .then((result) => {
                console.log('DATA ==> ' + result);
              });
         }


        function setVisitorID () {

            var myCookie = getCookie("apex__tcVisitorID");
            //console.log('myCookie', myCookie);
            if (myCookie == null) {
        
                expiry = new Date();
                expiry.setTime(expiry.getTime()+(60 * 60 * 24 * 30 * 1000 )); 
                //60 seconds to a minute, 60 minutes to an hour, 24 hours to a day, and 30 days. * 1000 Taken to milliseconds
                var visitorID = CreateGuid();
                document.cookie = "apex__tcVisitorID="+ visitorID +"; expires=" + expiry.toGMTString();
                
                return visitorID;
            } else {
                return myCookie;
            }
        }
        
      
        function CreateGuid() {  
        function _p8(s) {  
            var p = (Math.random().toString(16)+"000000000").substr(2,8);  
            return s ? "-" + p.substr(0,4) + "-" + p.substr(4,4) : p ;  
        }  
            return _p8() + _p8(true) + _p8(true) + _p8();  
        } 
    
      
        function getCookie(cookieName) {
            let cookie = {};
            document.cookie.split(';').forEach(function(el) {
                let [key,value] = el.split('=');
                cookie[key.trim()] = value;
            })
            return cookie[cookieName];
        }
            

            
            
            
            

            

  
    </script>
  
  
  
  </body>
    

    

</html>
